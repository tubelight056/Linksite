{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prem/Documents/Projects/Linksite-production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/Prem/Documents/Projects/Linksite-production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/Prem/Documents/Projects/Linksite-production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Prem/Documents/Projects/Linksite-production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import Collectioncard from\"../../components/collectioncard/CollectionCard\";import\"./Home.css\";import AddIcon from\"./addIcon.ico\";import{useHistory}from\"react-router\";import config from\"../../url\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(props){var history=useHistory();var params=props.match.params;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),collectionList=_useState2[0],setcollectionList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],seterrorMessage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newCollection=_useState6[0],setNewCollection=_useState6[1];var email=sessionStorage.getItem(\"email\");var onErrorHandler=function onErrorHandler(data){seterrorMessage(data);setTimeout(function(){seterrorMessage(null);},[5000]);};var getCollectionListHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(config.API_URL+\"/user/getcollectionlist\",{id:params.id,email:email}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(data.data.status){setcollectionList(_toConsumableArray(data.data.collections));}else{onErrorHandler(data.data.statusMessage);}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){onErrorHandler(\"Something went wrong , please try again\");});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function getCollectionListHandler(){return _ref.apply(this,arguments);};}();var onSelectHandler=function onSelectHandler(data){history.push(\"/collection/\".concat(data.id));};var onCreateHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(newCollection===\"\")){_context4.next=4;break;}onErrorHandler(\"Enter a Valid Collection Name\");_context4.next=6;break;case 4:_context4.next=6;return axios.post(config.API_URL+\"/collection/createcollection\",{id:params.id,email:email,collectionName:newCollection}).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(data.data.status){getCollectionListHandler();setNewCollection(\"\");}else{onErrorHandler(data.data.statusMessage);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref4.apply(this,arguments);};}()).catch(function(err){onErrorHandler(\"Something went wrong , please try again\");});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function onCreateHandler(){return _ref3.apply(this,arguments);};}();var onDeleteHandler=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.post(config.API_URL+\"/collection/deletecollection\",{id:params.id,email:email,collectionId:data.id}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(data.data.status){getCollectionListHandler();}else{onErrorHandler(data.data.statusMessage);}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}()).catch(function(err){onErrorHandler(\"Something went wrong , please try again\");});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function onDeleteHandler(_x3){return _ref5.apply(this,arguments);};}();useEffect(function(){getCollectionListHandler();});return/*#__PURE__*/_jsxs(\"div\",{className:\"homeOuterScreen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"homeInnerScreen\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"welcomeh1\",children:\"Welcome Prem ,Here your Collections\"}),collectionList!==[]&&collectionList.map(function(data){return/*#__PURE__*/_jsx(Collectioncard,{collectionName:data.collectionName,id:data._id,onDeleteCallBack:function onDeleteCallBack(data){onDeleteHandler(data);},onSelectCallBack:function onSelectCallBack(data){onSelectHandler(data);}},data._id);}),/*#__PURE__*/_jsx(\"div\",{className:\"outerBoxAddContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"addCollection\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"homeInput\",type:\"text\",name:\"Collection\",placeholder:\"Add Collection\",value:newCollection,onChange:function onChange(e){setNewCollection(e.target.value);}}),/*#__PURE__*/_jsx(\"img\",{src:AddIcon,alt:\"add button\",className:\"HomeAddIcon\",onClick:function onClick(){onCreateHandler();}})]})})]}),errorMessage!==null&&/*#__PURE__*/_jsx(\"h1\",{className:\"errorMessageH1Home\",children:\"\".concat(errorMessage)})]});};export default Home;","map":{"version":3,"sources":["C:/Users/Prem/Documents/Projects/Linksite-production/src/screens/home/Home.js"],"names":["axios","React","useEffect","useState","Collectioncard","AddIcon","useHistory","config","Home","props","history","params","match","collectionList","setcollectionList","errorMessage","seterrorMessage","newCollection","setNewCollection","email","sessionStorage","getItem","onErrorHandler","data","setTimeout","getCollectionListHandler","post","API_URL","id","then","status","collections","statusMessage","catch","err","onSelectHandler","push","onCreateHandler","collectionName","onDeleteHandler","collectionId","map","_id","e","target","value"],"mappings":"irBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,cAAP,KAA2B,gDAA3B,CACA,MAAO,YAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,KAAD,CAAW,CACtB,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CACA,GAAMK,CAAAA,MAAM,CAAGF,KAAK,CAACG,KAAN,CAAYD,MAA3B,CACA,cAA4CR,QAAQ,CAAC,EAAD,CAApD,wCAAOU,cAAP,eAAuBC,iBAAvB,eACA,eAAwCX,QAAQ,CAAC,IAAD,CAAhD,yCAAOY,YAAP,eAAqBC,eAArB,eACA,eAA0Cb,QAAQ,CAAC,EAAD,CAAlD,yCAAOc,aAAP,eAAsBC,gBAAtB,eACA,GAAMC,CAAAA,KAAK,CAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,IAAD,CAAU,CAC/BP,eAAe,CAACO,IAAD,CAAf,CACAC,UAAU,CAAC,UAAM,CACfR,eAAe,CAAC,IAAD,CAAf,CACD,CAFS,CAEP,CAAC,IAAD,CAFO,CAAV,CAGD,CALD,CAMA,GAAMS,CAAAA,wBAAwB,0FAAG,+JACzBzB,CAAAA,KAAK,CACR0B,IADG,CACEnB,MAAM,CAACoB,OAAP,CAAiB,yBADnB,CAC8C,CAChDC,EAAE,CAAEjB,MAAM,CAACiB,EADqC,CAEhDT,KAAK,CAAEA,KAFyC,CAD9C,EAKHU,IALG,2FAKE,iBAAON,IAAP,kHACJ,GAAIA,IAAI,CAACA,IAAL,CAAUO,MAAd,CAAsB,CACpBhB,iBAAiB,oBAAKS,IAAI,CAACA,IAAL,CAAUQ,WAAf,EAAjB,CACD,CAFD,IAEO,CACLT,cAAc,CAACC,IAAI,CAACA,IAAL,CAAUS,aAAX,CAAd,CACD,CALG,sDALF,iEAYHC,KAZG,CAYG,SAACC,GAAD,CAAS,CACdZ,cAAc,CAAC,yCAAD,CAAd,CACD,CAdG,CADyB,yDAAH,kBAAxBG,CAAAA,wBAAwB,0CAA9B,CAiBA,GAAMU,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACZ,IAAD,CAAU,CAChCb,OAAO,CAAC0B,IAAR,uBAA4Bb,IAAI,CAACK,EAAjC,GACD,CAFD,CAGA,GAAMS,CAAAA,eAAe,2FAAG,6IAClBpB,aAAa,GAAK,EADA,2BAEpBK,cAAc,CAAC,+BAAD,CAAd,CAFoB,qDAIdtB,CAAAA,KAAK,CACR0B,IADG,CACEnB,MAAM,CAACoB,OAAP,CAAiB,8BADnB,CACmD,CACrDC,EAAE,CAAEjB,MAAM,CAACiB,EAD0C,CAErDT,KAAK,CAAEA,KAF8C,CAGrDmB,cAAc,CAAErB,aAHqC,CADnD,EAMHY,IANG,2FAME,kBAAON,IAAP,sHACJ,GAAIA,IAAI,CAACA,IAAL,CAAUO,MAAd,CAAsB,CACpBL,wBAAwB,GACxBP,gBAAgB,CAAC,EAAD,CAAhB,CACD,CAHD,IAGO,CACLI,cAAc,CAACC,IAAI,CAACA,IAAL,CAAUS,aAAX,CAAd,CACD,CANG,wDANF,kEAcHC,KAdG,CAcG,SAACC,GAAD,CAAS,CACdZ,cAAc,CAAC,yCAAD,CAAd,CACD,CAhBG,CAJc,yDAAH,kBAAfe,CAAAA,eAAe,2CAArB,CAuBA,GAAME,CAAAA,eAAe,2FAAG,kBAAOhB,IAAP,6IAChBvB,CAAAA,KAAK,CACR0B,IADG,CACEnB,MAAM,CAACoB,OAAP,CAAiB,8BADnB,CACmD,CACrDC,EAAE,CAAEjB,MAAM,CAACiB,EAD0C,CAErDT,KAAK,CAAEA,KAF8C,CAGrDqB,YAAY,CAAEjB,IAAI,CAACK,EAHkC,CADnD,EAMHC,IANG,2FAME,kBAAON,IAAP,sHACJ,GAAIA,IAAI,CAACA,IAAL,CAAUO,MAAd,CAAsB,CACpBL,wBAAwB,GACzB,CAFD,IAEO,CACLH,cAAc,CAACC,IAAI,CAACA,IAAL,CAAUS,aAAX,CAAd,CACD,CALG,wDANF,kEAaHC,KAbG,CAaG,SAACC,GAAD,CAAS,CACdZ,cAAc,CAAC,yCAAD,CAAd,CACD,CAfG,CADgB,yDAAH,kBAAfiB,CAAAA,eAAe,8CAArB,CAkBArC,SAAS,CAAC,UAAM,CACduB,wBAAwB,GACzB,CAFQ,CAAT,CAGA,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,WAAI,SAAS,CAAC,WAAd,iDADF,CAEGZ,cAAc,GAAK,EAAnB,EACCA,cAAc,CAAC4B,GAAf,CAAmB,SAAClB,IAAD,qBACjB,KAAC,cAAD,EAEE,cAAc,CAAEA,IAAI,CAACe,cAFvB,CAGE,EAAE,CAAEf,IAAI,CAACmB,GAHX,CAIE,gBAAgB,CAAE,0BAACnB,IAAD,CAAU,CAC1BgB,eAAe,CAAChB,IAAD,CAAf,CACD,CANH,CAOE,gBAAgB,CAAE,0BAACA,IAAD,CAAU,CAC1BY,eAAe,CAACZ,IAAD,CAAf,CACD,CATH,EACOA,IAAI,CAACmB,GADZ,CADiB,EAAnB,CAHJ,cAgBE,YAAK,SAAS,CAAC,sBAAf,uBACE,aAAK,SAAS,CAAC,eAAf,wBACE,cACE,SAAS,CAAC,WADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,YAHP,CAIE,WAAW,CAAC,gBAJd,CAKE,KAAK,CAAEzB,aALT,CAME,QAAQ,CAAE,kBAAC0B,CAAD,CAAO,CACfzB,gBAAgB,CAACyB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,CACD,CARH,EADF,cAWE,YACE,GAAG,CAAExC,OADP,CAEE,GAAG,CAAC,YAFN,CAGE,SAAS,CAAC,aAHZ,CAIE,OAAO,CAAE,kBAAM,CACbgC,eAAe,GAChB,CANH,EAXF,GADF,EAhBF,GADF,CAwCGtB,YAAY,GAAK,IAAjB,eACC,WAAI,SAAS,CAAC,oBAAd,oBAAuCA,YAAvC,GAzCJ,GADF,CA8CD,CA5HD,CA8HA,cAAeP,CAAAA,IAAf","sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Collectioncard from \"../../components/collectioncard/CollectionCard\";\r\nimport \"./Home.css\";\r\nimport AddIcon from \"./addIcon.ico\";\r\nimport { useHistory } from \"react-router\";\r\nimport config from \"../../url\";\r\n\r\nconst Home = (props) => {\r\n  const history = useHistory();\r\n  const params = props.match.params;\r\n  const [collectionList, setcollectionList] = useState([]);\r\n  const [errorMessage, seterrorMessage] = useState(null);\r\n  const [newCollection, setNewCollection] = useState(\"\");\r\n  const email = sessionStorage.getItem(\"email\");\r\n\r\n  const onErrorHandler = (data) => {\r\n    seterrorMessage(data);\r\n    setTimeout(() => {\r\n      seterrorMessage(null);\r\n    }, [5000]);\r\n  };\r\n  const getCollectionListHandler = async () => {\r\n    await axios\r\n      .post(config.API_URL + \"/user/getcollectionlist\", {\r\n        id: params.id,\r\n        email: email,\r\n      })\r\n      .then(async (data) => {\r\n        if (data.data.status) {\r\n          setcollectionList([...data.data.collections]);\r\n        } else {\r\n          onErrorHandler(data.data.statusMessage);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        onErrorHandler(\"Something went wrong , please try again\");\r\n      });\r\n  };\r\n  const onSelectHandler = (data) => {\r\n    history.push(`/collection/${data.id}`);\r\n  };\r\n  const onCreateHandler = async () => {\r\n    if (newCollection === \"\") {\r\n      onErrorHandler(\"Enter a Valid Collection Name\");\r\n    } else {\r\n      await axios\r\n        .post(config.API_URL + \"/collection/createcollection\", {\r\n          id: params.id,\r\n          email: email,\r\n          collectionName: newCollection,\r\n        })\r\n        .then(async (data) => {\r\n          if (data.data.status) {\r\n            getCollectionListHandler();\r\n            setNewCollection(\"\");\r\n          } else {\r\n            onErrorHandler(data.data.statusMessage);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          onErrorHandler(\"Something went wrong , please try again\");\r\n        });\r\n    }\r\n  };\r\n  const onDeleteHandler = async (data) => {\r\n    await axios\r\n      .post(config.API_URL + \"/collection/deletecollection\", {\r\n        id: params.id,\r\n        email: email,\r\n        collectionId: data.id,\r\n      })\r\n      .then(async (data) => {\r\n        if (data.data.status) {\r\n          getCollectionListHandler();\r\n        } else {\r\n          onErrorHandler(data.data.statusMessage);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        onErrorHandler(\"Something went wrong , please try again\");\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    getCollectionListHandler();\r\n  });\r\n  return (\r\n    <div className=\"homeOuterScreen\">\r\n      <div className=\"homeInnerScreen\">\r\n        <h1 className=\"welcomeh1\">Welcome Prem ,Here your Collections</h1>\r\n        {collectionList !== [] &&\r\n          collectionList.map((data) => (\r\n            <Collectioncard\r\n              key={data._id}\r\n              collectionName={data.collectionName}\r\n              id={data._id}\r\n              onDeleteCallBack={(data) => {\r\n                onDeleteHandler(data);\r\n              }}\r\n              onSelectCallBack={(data) => {\r\n                onSelectHandler(data);\r\n              }}\r\n            />\r\n          ))}\r\n        <div className=\"outerBoxAddContainer\">\r\n          <div className=\"addCollection\">\r\n            <input\r\n              className=\"homeInput\"\r\n              type=\"text\"\r\n              name=\"Collection\"\r\n              placeholder=\"Add Collection\"\r\n              value={newCollection}\r\n              onChange={(e) => {\r\n                setNewCollection(e.target.value);\r\n              }}\r\n            />\r\n            <img\r\n              src={AddIcon}\r\n              alt=\"add button\"\r\n              className=\"HomeAddIcon\"\r\n              onClick={() => {\r\n                onCreateHandler();\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {errorMessage !== null && (\r\n        <h1 className=\"errorMessageH1Home\">{`${errorMessage}`}</h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}